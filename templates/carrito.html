<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito - AgroMarket</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos_comprador.css') }}">
</head>
<body>
   <!-- Men√∫ superior -->
   <nav>
       <div class="nav-left">
           <div class="logo"><h2>AgroMarket</h2></div>
           <div class="saludo-usuario">Hola, <strong>{{ nombre }}</strong></div>
       </div>
       <div class="menu">
           <a href="{{ url_for('comprador.panel_comprador') }}">Inicio</a>
           <a href="{{ url_for('comprador.ver_productos') }}">Productos</a>
           <a href="{{ url_for('comprador.ver_carrito') }}" class="activo">Carrito üõí</a>
           <a href="{{ url_for('auth.logout') }}">Cerrar sesi√≥n</a>
       </div>
   </nav>

   <!-- Contenedor del carrito -->
   <div class="carrito-container">
       <h1>üõí Mi carrito</h1>
       <table id="tablaCarrito">
           <thead>
               <tr>
                   <th>Producto</th>
                   <th>Precio</th>
                   <th>Cantidad</th>
                   <th>Subtotal</th>
                   <th>Acci√≥n</th>
               </tr>
           </thead>
           <tbody id="listaCarrito">
               {% if carrito %}
                   {% for item in carrito %}
                   <tr>
                       <td>{{ item.nombre }}</td>
                       <td>${{ "%.2f"|format(item.precio) }}</td>
                       <td>{{ item.cantidad }}</td>
                       <td>${{ "%.2f"|format(item.precio * item.cantidad) }}</td>
                       <td>
                           <form action="{{ url_for('comprador.eliminar_del_carrito', producto_id=item.id) }}" method="POST">
                               <button type="submit">‚ùå</button>
                           </form>
                       </td>
                   </tr>
                   {% endfor %}
               {% else %}
                   <tr><td colspan="5">Tu carrito est√° vac√≠o.</td></tr>
               {% endif %}
           </tbody>
       </table>

       <p class="total"><strong>Total:</strong> ${{ "%.2f"|format(total) }}</p>

      <form action="{{ url_for('comprador.finalizar_compra') }}" method="POST">
    <button type="submit">Finalizar compra ‚úÖ</button>
</form>


       <br><br>
       <a href="{{ url_for('comprador.ver_productos') }}">‚¨Ö Ver productos</a>
   </div>
</body>
</html>
