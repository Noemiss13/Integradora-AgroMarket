<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos - AgroMarket</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/panel_comprador.css') }}">
</head>
<body>
    <!-- ===== Menú superior ===== -->
    <nav>
        <div class="logo">
            <h2>AgroMarket</h2>
        </div>
        <div class="menu">
            <a href="{{ url_for('comprador.panel_comprador') }}">Inicio</a>
            <a href="{{ url_for('comprador.ver_productos') }}">Productos</a>
            <a href="{{ url_for('auth.logout') }}">Cerrar sesión</a>
        </div>
    </nav>

    <!-- ===== Saludo ===== -->
    <header class="saludo">
        <h1>Bienvenido, {{ nombre }}</h1>
    </header>

    <!-- ===== Filtros y búsqueda ===== -->
    <section class="filtros">
        <input type="text" id="busqueda" placeholder="Buscar producto...">
        <select id="categoria">
            <option value="">Todas las categorías</option>
            <option value="semillas">Semillas</option>
            <option value="frutas">Frutas</option>
            <option value="verduras">Verduras</option>
            <option value="herramientas">Herramientas</option>
        </select>
        <button id="btnBuscar">Buscar</button>
    </section>

    <!-- ===== Listado de productos ===== -->
    <section class="productos" id="productos">
        {% for producto in productos %}
        <div class="producto-card" data-categoria="{{ producto.categoria }}">
            <img src="{{ url_for('static', filename='uploads/' + producto.imagen) }}" alt="{{ producto.nombre }}">
            <h3>{{ producto.nombre }}</h3>
            <p>{{ producto.descripcion }}</p>
            <p class="precio">Precio: ${{ producto.precio }}</p>
            <button class="comprar" data-id="{{ producto.id }}" data-nombre="{{ producto.nombre }}" data-precio="{{ producto.precio }}">Agregar al carrito</button>
        </div>
        {% endfor %}
    </section>

    <!-- ===== Carrito lateral ===== -->
    <section class="carrito" id="carrito">
        <h2>Mi carrito</h2>
        <ul id="listaCarrito"></ul>
        <p>Total: $<span id="totalCarrito">0</span></p>
        <button id="btnComprar">Comprar</button>
    </section>

    <!-- ===== Scripts ===== -->
    <script src="{{ url_for('static', filename='js/comprador.js') }}"></script>
</body>
</html>
